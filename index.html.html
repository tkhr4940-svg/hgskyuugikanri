
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡ çƒæŠ€å¤§ä¼š</title>
  <meta name="description" content="åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡ã®çƒæŠ€å¤§ä¼šå…¬å¼ãƒšãƒ¼ã‚¸ã€‚é–‹å‚¬æ¦‚è¦ã€å¤–éƒ¨ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯ï¼ˆé€Ÿå ±ãƒ»ãŠçŸ¥ã‚‰ã›ãƒ»ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»ç«¶æŠ€ç¨®ç›®ãƒ»ã‚¢ã‚¯ã‚»ã‚¹ãƒ»å•ã„åˆã‚ã›ï¼‰ã€‚">
  <style>
    :root{
      /* === ã‚«ãƒ©ãƒ¼ï¼ˆç·¨é›†ãƒ‘ãƒãƒ«ã‹ã‚‰ã‚‚å¤‰æ›´ã•ã‚Œã¾ã™ï¼‰ === */
      --navy: #0C2340;           /* å­¦æ ¡ã‚«ãƒ©ãƒ¼ï¼ˆãƒã‚¤ãƒ“ãƒ¼ï¼‰ */
      --navy-darker:#07152a;
      --accent-gold:#FFD84D;     /* ã‚¤ãƒ™ãƒ³ãƒˆæ„Ÿã®ã‚´ãƒ¼ãƒ«ãƒ‰ */
      --accent-blue:#43C1F2;     /* ã•ã‚ã‚„ã‹ãƒ–ãƒ«ãƒ¼ */
      --text: #ffffff;
      --muted: #cdd7e1;
      --card: #0f2a50cc;         /* åŠé€æ˜ã‚«ãƒ¼ãƒ‰ */
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    html,body{
      height:100%;
      background: radial-gradient(1200px 600px at 15% 10%, #17355f 0%, var(--navy) 45%, var(--navy-darker) 100%);
      color: var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
      line-height:1.6;
      margin:0;
      overflow-x:hidden;
    }

    /* ã‚¢ãƒ‹ãƒ¡å±¤ï¼ˆä¸¸ã„ãƒœãƒ¼ãƒ«ï¼‰ */
    .balls-layer{
      position: fixed; inset: 0; z-index: 0; overflow: visible; pointer-events: none;
      mask-image: linear-gradient(to bottom, rgba(0,0,0,.2), rgba(0,0,0,1) 35%, rgba(0,0,0,1) 65%, rgba(0,0,0,.2));
    }
    .ball{ position:absolute; left:-12vw; will-change: transform, left, top; animation: drift linear infinite; filter: drop-shadow(0 10px 12px rgba(0,0,0,.3)); }
    .ball-core{
      border-radius:50%;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), rgba(255,255,255,0) 35%),
        radial-gradient(circle at 70% 75%, rgba(0,0,0,.25), rgba(0,0,0,0) 40%);
      box-shadow: inset 0 0 0 2px rgba(255,255,255,.06), inset 0 -6px 14px rgba(0,0,0,.25);
      animation: bob ease-in-out infinite alternate; transform: translateZ(0);
    }
    .c-tennis    { background-color:#B7F73B; }
    .c-basket    { background-color:#F2994A; }
    .c-soccer    { background-color:#F2F2F2; }
    .c-volley    { background-color:#4FC3F7; }
    .c-baseball  { background-color:#FFFFFF; }
    .c-dodge     { background-color:#F25F5C; }

    @keyframes drift{ 0%{ transform: translateX(0) rotate(0deg);} 100%{ transform: translateX(120vw) rotate(720deg);} }
    @keyframes bob{ 0%{ transform: translateY(calc(var(--bob, 16px) * -1)); } 100%{ transform: translateY(var(--bob, 16px)); } }

    /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
    .skip-link{ position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden; }
    .skip-link:focus{ left: 16px; top: 16px; width:auto; height:auto; z-index:9999; background:#000; color:#fff; padding:.5rem .75rem; border-radius:.5rem; outline: 3px solid var(--accent-blue); }
    header{
      position: relative; z-index: 1; padding: 18px 20px;
      display:flex; align-items:center; justify-content:space-between;
      border-bottom: 1px solid rgba(255,255,255,.08);
      background: linear-gradient(to bottom, rgba(255,255,255,.06), rgba(255,255,255,0));
      backdrop-filter: blur(4px);
    }
    .brand{ display:flex; align-items:center; gap:.75rem; font-weight:700; letter-spacing:.02em; }
    .brand__mark{ width:36px; height:36px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #fff, #fff0 45%), var(--accent-blue); border:2px solid rgba(255,255,255,.65); box-shadow: 0 6px 14px rgba(0,0,0,.25), inset 0 0 0 2px rgba(255,255,255,.2); }
    nav a{ color: var(--text); text-decoration:none; margin-left:18px; padding: 8px 12px; border-radius:999px; transition: transform .15s ease, background-color .2s ease, color .2s ease; }
    nav a:hover{ background: rgba(255,255,255,.12); transform: translateY(-1px); }

    /* ãƒ’ãƒ¼ãƒ­ãƒ¼ */
    .hero{ position:relative; z-index:1; padding: clamp(48px, 8vw, 100px) 20px 48px; text-align:center; }
    .eyebrow{ display:inline-block; font-size:.95rem; letter-spacing:.15em; color: #111; background: linear-gradient(90deg, var(--accent-gold), #FFB703); padding: .35rem .75rem; border-radius: 999px; box-shadow: var(--shadow); }
    .headline{ font-size: clamp(28px, 4.8vw, 48px); margin: 18px auto 10px; font-weight: 800; line-height: 1.2; text-wrap: balance; text-shadow: 0 2px 0 rgba(0,0,0,.25); }
    .sub{ max-width: 780px; margin: 0 auto 28px; color: var(--muted); font-size: clamp(15px, 2.2vw, 18px); }
    .cta{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
    .btn{ display:inline-flex; align-items:center; gap:.5rem; padding: 12px 18px; border-radius: 12px; border: 1px solid rgba(255,255,255,.18); text-decoration:none; color:#0b172b; font-weight:700; background: linear-gradient(180deg, #fff, #dfe9ff); box-shadow: var(--shadow); transition: transform .15s ease, box-shadow .2s ease, filter .2s ease; }
    .btn:hover{ transform: translateY(-2px); filter: brightness(1.02); }
    .btn--outline{ background: transparent; color: var(--text); border: 1px solid rgba(255,255,255,.35); box-shadow: none; }
    .btn--outline:hover{ background: rgba(255,255,255,.12); }

    /* ã‚»ã‚¯ã‚·ãƒ§ãƒ³å…±é€š */
    main{ position: relative; z-index: 1; padding: 0 20px 80px; }
    .info-card{
      max-width: 980px; margin: 24px auto;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.12); border-radius: 16px; box-shadow: var(--shadow);
      overflow:hidden;
    }
    .info-card__inner{ padding: 22px; }
    .info-card h2{ font-size: 1.25rem; font-weight:800; letter-spacing:.02em; margin: 4px 0 10px; }
    .spark{ color: #0b172b; background: linear-gradient(90deg, var(--accent-gold), #FFB703); padding: .2rem .55rem; border-radius: .5rem; box-shadow: 0 6px 12px rgba(0,0,0,.25); }
    .muted{ color: var(--muted); }

    /* ãƒ•ãƒƒã‚¿ãƒ¼ */
    footer{ position: relative; z-index:1; padding: 40px 20px 60px; text-align:center; color: var(--muted); }
    footer a{ color: var(--accent-blue); }

    /* ç·¨é›†UI */
    .edit-toggle{ position: fixed; right: 16px; top: 16px; z-index: 1000; }
    .edit-panel{
      position: fixed; right: 16px; top: 64px; width: 320px; max-width: 92vw;
      background: rgba(18,26,44,.9); border:1px solid rgba(255,255,255,.2);
      border-radius: 14px; padding: 12px; z-index: 1000; color: #fff; display:none; box-shadow: var(--shadow); backdrop-filter: blur(6px);
    }
    .edit-panel h3{ margin: 6px 0 10px; font-size: 1.05rem; }
    .edit-panel label{ font-size: .9rem; opacity: .9; }
    .edit-row{ display:grid; grid-template-columns: 1fr 1fr; gap:8px; margin-bottom:10px; }
    .edit-panel input[type="text"], .edit-panel input[type="color"]{ width:100%; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,.2); background: rgba(255,255,255,.1); color:#fff; }
    .edit-panel button{ padding:8px 10px; border-radius:10px; border:1px solid rgba(255,255,255,.2); background: rgba(255,255,255,.15); color:#fff; cursor:pointer; }
    .edit-panel button:hover{ background: rgba(255,255,255,.25); }

    .edit-mode [data-editable="true"]{ outline: 2px dashed rgba(255,255,255,.35); outline-offset: 2px; border-radius: 6px; }

    /* ã‚¢ãƒ‹ãƒ¡ä½æ¸› */
    @media (prefers-reduced-motion: reduce){ .ball, .ball-core{ animation: none !important; } }
  </style>
</head>
<body>
  <a href="#main" class="skip-link">æœ¬æ–‡ã¸ã‚¹ã‚­ãƒƒãƒ—</a>

  <!-- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãƒœãƒ¼ãƒ« -->
  <div class="balls-layer" aria-hidden="true"></div>

  <!-- ç·¨é›†ãƒˆã‚°ãƒ« -->
  <div class="edit-toggle">
    <button id="toggleEdit" class="btn btn--outline">âœï¸ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰</button>
  </div>

  <!-- ç·¨é›†ãƒ‘ãƒãƒ« -->
  <div id="editPanel" class="edit-panel" role="region" aria-label="ç·¨é›†ãƒ‘ãƒãƒ«">
    <h3>ç·¨é›†ãƒ‘ãƒãƒ«</h3>
    <div class="edit-hint">ãƒ†ã‚­ã‚¹ãƒˆã¯ãƒšãƒ¼ã‚¸ä¸Šã§ç›´æ¥ç·¨é›†ã§ãã¾ã™ã€‚è‰²ã¨ãƒªãƒ³ã‚¯ã¯ä¸‹ã§èª¿æ•´ â†’ ä¿å­˜ã€‚</div>

    <!-- è‰²è¨­å®š -->
    <h3>ã‚«ãƒ©ãƒ¼</h3>
    <div class="edit-row">
      <label>å­¦æ ¡ã‚«ãƒ©ãƒ¼</label>
      <input type="color" id="colorNavy" value="#0C2340" title="--navy">
    </div>
    <div class="edit-row">
      <label>ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼ˆã‚´ãƒ¼ãƒ«ãƒ‰ï¼‰</label>
      <input type="color" id="colorGold" value="#FFD84D" title="--accent-gold">
    </div>
    <div class="edit-row">
      <label>ã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼ˆãƒ–ãƒ«ãƒ¼ï¼‰</label>
      <input type="color" id="colorBlue" value="#43C1F2" title="--accent-blue">
    </div>

    <!-- å¤–éƒ¨ãƒªãƒ³ã‚¯è¨­å®š -->
    <h3>ãƒªãƒ³ã‚¯URL</h3>
    <div class="edit-hint">ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é·ç§»å…ˆURLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆç©ºæ¬„=ç„¡åŠ¹ãƒªãƒ³ã‚¯ï¼‰ã€‚</div>
    <div class="edit-row">
      <label for="urlFlash">é€Ÿå ±</label>
      <input type="text" id="urlFlash"
value="https://docs.google.com/spreadsheets/d/e/2PACX-1vS-RIWZPYNa2ycIJmfuXljLwk8llB6Ty3gErQuhZYYt74fhazev94MRma891me1Qg/pubhtml">
    </div>
    <div class="edit-row">
      <label for="urlNews">ãŠçŸ¥ã‚‰ã›</label>
      <input type="text" id="urlNews"
value="https://docs.google.com/document/d/e/2PACX-1vTew8pziDIiqB9b9E3gquQnpsIwyGg0ndx9J6EjY5EhVNJ4GOIejcwP9NVzn2stSsC2METhJOkNElOk/pub">
    </div>
    <div class="edit-row">
      <label for="urlSchedule">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</label>
      <input type="text" id="urlSchedule"
value="https://docs.google.com/document/d/e/2PACX-1vTew8pziDIiqB9b9E3gquQnpsIwyGg0ndx9J6EjY5EhVNJ4GOIejcwP9NVzn2stSsC2METhJOkNElOk/pub">
    </div>
    <div class="edit-row">
      <label for="urlSports">ç«¶æŠ€ç¨®ç›®</label>
      <input type="text" id="urlSports"
value="https://docs.google.com/document/d/e/2PACX-1vTew8pziDIiqB9b9E3gquQnpsIwyGg0ndx9J6EjY5EhVNJ4GOIejcwP9NVzn2stSsC2METhJOkNElOk/pub">
    </div>
    <div class="edit-row">
      <label for="urlAccess">ã‚¢ã‚¯ã‚»ã‚¹</label>
      <input type="text" id="urlAccess" placeholder="https://example.com/access">
    </div>
    <div class="edit-row">
      <label for="urlContact">å•ã„åˆã‚ã›</label>
      <input type="text" id="urlContact" placeholder="https://example.com/contact">
    </div>

    <!-- ä¿å­˜ç³» -->
    <div class="edit-actions" style="margin-top:8px; display:flex; gap:8px; flex-wrap:wrap;">
      <button id="btnSave">ğŸ’¾ ä¿å­˜</button>
      <button id="btnLoad">âŸ³ èª­ã¿è¾¼ã¿</button>
      <button id="btnExport">â¬‡ï¸ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
      <button id="btnImport">â¬†ï¸ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
      <input id="importFile" type="file" accept="application/json" style="display:none">
    </div>
    <div class="muted" style="margin-top:6px;">â€» ä¿å­˜ã¯ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã«è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚å…¬é–‹PCã§ã¯ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆJSONã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚</div>
  </div>

  <header>
    <div class="brand" aria-label="ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ«">
      <div class="brand__mark" aria-hidden="true"></div>
      <div>
        <div style="opacity:.9;font-size:.9rem;" data-editable="true" contenteditable="false" id="schoolName">åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡</div>
        <div style="font-size:1.05rem;" data-editable="true" contenteditable="false" id="eventName">çƒæŠ€å¤§ä¼š</div>
      </div>
    </div>
    <nav aria-label="ä¸»è¦ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³">
      <a id="lnkFlash"    href="javascript:void(0)" title="é€Ÿå ±">é€Ÿå ±</a>
      <a id="lnkNews"     href="javascript:void(0)" title="ãŠçŸ¥ã‚‰ã›">ãŠçŸ¥ã‚‰ã›</a>
      <a id="lnkSchedule" href="javascript:void(0)" title="ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«">ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</a>
      <a id="lnkSports"   href="javascript:void(0)" title="ç«¶æŠ€ç¨®ç›®">ç«¶æŠ€ç¨®ç›®</a>
      <a id="lnkAccess"   href="javascript:void(0)" title="ã‚¢ã‚¯ã‚»ã‚¹">ã‚¢ã‚¯ã‚»ã‚¹</a>
      <a id="lnkContact"  href="javascript:void(0)" title="å•ã„åˆã‚ã›">å•ã„åˆã‚ã›</a>
    </nav>
  </header>

  <section class="hero">
    <span class="eyebrow" data-editable="true" contenteditable="false" id="tagline">SCHOOL SPORTS FESTIVAL</span>
    <h1 class="headline"><span id="heroTitle" data-editable="true" contenteditable="false">åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡ <span style="color:var(--accent-gold)">çƒæŠ€å¤§ä¼š</span></span></h1>
    <p class="sub" id="heroSub" data-editable="true" contenteditable="false">
      ä»²é–“ã¨å…¨åŠ›ã§ã€ç¬‘é¡”ã§ã€ãã—ã¦ãƒ•ã‚§ã‚¢ã«ã€‚<br>
      ä»Šå¹´ã‚‚ç†±ã„æˆ¦ã„ãŒã¯ã˜ã¾ã‚Šã¾ã™ï¼
    </p>
    <div class="cta">
      <!-- CTAã¯è¨­å®šæ¸ˆã¿URLãŒã‚ã‚Œã°å¤–éƒ¨ã‚’é–‹ãï¼ãªã‘ã‚Œã°ç„¡åŠ¹ -->
      <a id="ctaSchedule" class="btn" href="javascript:void(0)" title="ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«">â° ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¦‹ã‚‹</a>
      <a id="ctaNews" class="btn btn--outline" href="javascript:void(0)" title="ãŠçŸ¥ã‚‰ã›">ğŸ“£ æœ€æ–°ã®ãŠçŸ¥ã‚‰ã›</a>
    </div>
  </section>

  <main id="main">
    <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯å‰Šé™¤ã€‚å¿…è¦ã«å¿œã˜ã¦ç‹¬è‡ªã®æ¡ˆå†…ã‚«ãƒ¼ãƒ‰ã‚’ç½®ãã“ã¨ãŒã§ãã¾ã™ã€‚ -->
    <div class="info-card" aria-live="polite">
      <div class="info-card__inner">
        <h2><span class="spark">ã”æ¡ˆå†…</span></h2>
        <p data-editable="true" contenteditable="false" id="introText">
          æœ¬ãƒšãƒ¼ã‚¸ã§ã¯é–‹å‚¬æ¦‚è¦ã¨å¤–éƒ¨ãƒšãƒ¼ã‚¸ã¸ã®ãƒªãƒ³ã‚¯ã‚’æä¾›ã—ã¾ã™ã€‚<br>
          è©³ç´°ï¼ˆé€Ÿå ±ï¼ãŠçŸ¥ã‚‰ã›ï¼ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ç«¶æŠ€ç¨®ç›®ï¼ã‚¢ã‚¯ã‚»ã‚¹ï¼å•ã„åˆã‚ã›ï¼‰ã¯ä¸Šéƒ¨ãƒŠãƒ“ã‹ã‚‰å„ãƒšãƒ¼ã‚¸ã‚’ã”è¦§ãã ã•ã„ã€‚
        </p>
      </div>
    </div>
  </main>

  <footer>
    Â© <span id="year"></span> <span data-editable="true" contenteditable="false" id="schoolFooter">åŒ—æµ·å­¦åœ’æœ­å¹Œé«˜æ ¡</span> çƒæŠ€å¤§ä¼š
  </footer>

  <script>
    // ===== å¹´è¡¨ç¤º =====
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== ãƒœãƒ¼ãƒ«ã®ã‚¢ãƒ‹ãƒ¡ç”Ÿæˆ =====
    const BALL_COUNT = 14, SIZE_MIN = 24, SIZE_MAX = 96, SPEED_MIN = 16, SPEED_MAX = 42, BOB_MIN = 8, BOB_MAX = 26;
    const palette = ["c-tennis","c-basket","c-soccer","c-volley","c-baseball","c-dodge"];
    const layer = document.querySelector('.balls-layer');

    function rand(min, max){ return Math.random() * (max - min) + min; }
    function pick(arr){ return arr[Math.floor(Math.random() * arr.length)]; }

    function spawnBall(){
      const wrap = document.createElement('div'); wrap.className = 'ball';
      const core = document.createElement('div'); core.className = 'ball-core ' + pick(palette);
      const size = Math.round(rand(SIZE_MIN, SIZE_MAX));
      core.style.width = size + 'px'; core.style.height = size + 'px';
      wrap.style.top = rand(5, 85) + 'vh';
      const duration = rand(SPEED_MIN, SPEED_MAX);
      wrap.style.animationDuration = duration + 's';
      wrap.style.animationDelay = (-1 * rand(0, duration)) + 's';
      const bob = Math.round(rand(BOB_MIN, BOB_MAX));
      core.style.setProperty('--bob', bob + 'px');
      core.style.animationDuration = rand(2.4, 4.4) + 's';
      core.style.animationDelay = rand(0, 2) + 's';
      const depth = rand(0.6, 1.0); core.style.opacity = depth.toFixed(2);
      wrap.appendChild(core); layer.appendChild(wrap);
    }
    for(let i=0; i<BALL_COUNT; i++) spawnBall();
    setInterval(()=>{
      if(document.hidden) return;
      const children = layer.children; if(!children.length) return;
      const idx = Math.floor(Math.random()*children.length);
      const wrap = children[idx];
      wrap.style.top = rand(5, 85) + 'vh';
      wrap.style.animationDuration = rand(SPEED_MIN, SPEED_MAX) + 's';
    }, 5000);

    // ====== ç·¨é›†ãƒ¢ãƒ¼ãƒ‰åˆ¶å¾¡ ======
    const root = document.documentElement;
    const toggleBtn = document.getElementById('toggleEdit');
    const panel = document.getElementById('editPanel');
    const colorNavy = document.getElementById('colorNavy');
    const colorGold = document.getElementById('colorGold');
    const colorBlue = document.getElementById('colorBlue');
    const btnSave = document.getElementById('btnSave');
    const btnLoad = document.getElementById('btnLoad');
    const btnExport = document.getElementById('btnExport');
    const btnImport = document.getElementById('btnImport');
    const importFile = document.getElementById('importFile');

    function setEditable(enabled){
      document.body.classList.toggle('edit-mode', enabled);
      document.querySelectorAll('[data-editable="true"]').forEach(el=>{
        el.contentEditable = enabled ? 'true' : 'false';
      });
      panel.style.display = enabled ? 'block' : 'none';
      toggleBtn.textContent = enabled ? 'âœ… ç·¨é›†å®Œäº†ï¼ˆä¿å­˜æ¨å¥¨ï¼‰' : 'âœï¸ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰';
    }
    toggleBtn.addEventListener('click', ()=> setEditable(!document.body.classList.contains('edit-mode')));

    // è‰²å¤‰æ›´
    function applyColors(){
      root.style.setProperty('--navy', colorNavy.value);
      root.style.setProperty('--accent-gold', colorGold.value);
      root.style.setProperty('--accent-blue', colorBlue.value);
    }
    [colorNavy,colorGold,colorBlue].forEach(inp=> inp.addEventListener('input', applyColors));

    // ====== å¤–éƒ¨ãƒªãƒ³ã‚¯ï¼ˆãƒŠãƒ“ + CTAï¼‰ ======
    const navLinks = {
      flash:    document.getElementById('lnkFlash'),
      news:     document.getElementById('lnkNews'),
      schedule: document.getElementById('lnkSchedule'),
      sports:   document.getElementById('lnkSports'),
      access:   document.getElementById('lnkAccess'),
      contact:  document.getElementById('lnkContact'),
    };
    const ctaLinks = {
      news: document.getElementById('ctaNews'),
      schedule: document.getElementById('ctaSchedule'),
    };
    const urlInputs = {
      flash:    document.getElementById('urlFlash'),
      news:     document.getElementById('urlNews'),
      schedule: document.getElementById('urlSchedule'),
      sports:   document.getElementById('urlSports'),
      access:   document.getElementById('urlAccess'),
      contact:  document.getElementById('urlContact'),
    };

    function sanitizeUrl(url){
      const u = (url || '').trim();
      if(!u) return '';
      try{
        // ç›¸å¯¾URLã‚‚è¨±å¯ï¼ˆãƒ™ãƒ¼ã‚¹ã¯ç¾åœ¨ã®ã‚ªãƒªã‚¸ãƒ³ï¼‰
        const parsed = new URL(u, window.location.origin);
        if(!/^https?:$/.test(parsed.protocol)) return '';
        return parsed.toString();
      }catch(_){
        return '';
      }
    }

    function setAnchor(a, href){
      if(!a) return;
      const u = sanitizeUrl(href);
      if(u){
        a.href = u;
        a.target = '_blank';
        a.rel = 'noopener noreferrer';
        a.dataset.active = '1';
        if(!/ï¼ˆåˆ¥ã‚¿ãƒ–ã§é–‹ãã¾ã™ï¼‰$/.test(a.title || '')){
          a.title = (a.title || a.textContent || '') + 'ï¼ˆåˆ¥ã‚¿ãƒ–ã§é–‹ãã¾ã™ï¼‰';
        }
      }else{
        a.href = 'javascript:void(0)';
        a.removeAttribute('target');
        a.removeAttribute('rel');
        a.dataset.active = '0';
        a.title = (a.title || a.textContent || '').replace(/ï¼ˆåˆ¥ã‚¿ãƒ–ã§é–‹ãã¾ã™ï¼‰/g, '');
      }
    }

    function applyNavUrls(urls){
      setAnchor(navLinks.flash,    urls?.flash);
      setAnchor(navLinks.news,     urls?.news);
      setAnchor(navLinks.schedule, urls?.schedule);
      setAnchor(navLinks.sports,   urls?.sports);
      setAnchor(navLinks.access,   urls?.access);
      setAnchor(navLinks.contact,  urls?.contact);

      // CTAã¯ navUrls ã‚’å‚ç…§ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
      setAnchor(ctaLinks.news,     urls?.news);
      setAnchor(ctaLinks.schedule, urls?.schedule);

      // ç·¨é›†ãƒ‘ãƒãƒ«ã®å…¥åŠ›æ¬„ã«ã‚‚åæ˜ 
      if(urlInputs){
        Object.entries(urlInputs).forEach(([key, inp])=>{
          if(inp) inp.value = (urls?.[key] || '');
        });
      }
    }

    // URL å…¥åŠ›ã®å¤‰æ›´ã§å³æ™‚é©ç”¨ï¼ˆä¿å­˜ã¯æ˜ç¤ºçš„ã«ğŸ’¾ï¼‰
    Object.entries(urlInputs).forEach(([key, inp])=>{
      inp?.addEventListener('input', ()=>{
        const current = readState();
        current.navUrls = current.navUrls || {};
        current.navUrls[key] = inp.value;
        applyNavUrls(current.navUrls);
      });
    });

    // ====== ä¿å­˜/èª­ã¿è¾¼ã¿ï¼ˆlocalStorage + JSONã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼‰ ======
    const STORAGE_KEY = 'hgu-sportsfest-v2-minimal-with-flash';

    function readState(){
      // ãƒ†ã‚­ã‚¹ãƒˆé¡ï¼ˆIDä»˜ã & data-editableï¼‰
      const textFields = {};
      document.querySelectorAll('[id][data-editable="true"]').forEach(el=>{
        textFields[el.id] = el.innerHTML;
      });

      // è‰²
      const styles = getComputedStyle(root);
      const colors = {
        navy: styles.getPropertyValue('--navy').trim(),
        gold: styles.getPropertyValue('--accent-gold').trim(),
        blue: styles.getPropertyValue('--accent-blue').trim(),
      };

      // ãƒŠãƒ“URLï¼ˆå…¥åŠ›æ¬„ã‹ã‚‰ï¼‰
      const navUrls = {
        flash:    urlInputs.flash?.value || '',
        news:     urlInputs.news?.value || '',
        schedule: urlInputs.schedule?.value || '',
        sports:   urlInputs.sports?.value || '',
        access:   urlInputs.access?.value || '',
        contact:  urlInputs.contact?.value || '',
      };

      return { textFields, colors, navUrls, savedAt: new Date().toISOString() };
    }

    function applyState(state){
      // ãƒ†ã‚­ã‚¹ãƒˆ
      if(state.textFields){
        Object.entries(state.textFields).forEach(([id, html])=>{
          const el = document.getElementById(id);
          if(el) el.innerHTML = html;
        });
      }
      // è‰²
      if(state.colors){
        // å…¥åŠ›æ¬„ã®å€¤ã«å¤‰æ›ï¼ˆ#RRGGBB ã®ã¿åæ˜ ï¼‰
        function toColorInput(val, fallback){
          const hex = (val || '').trim();
          return /^#([0-9A-Fa-f]{6})$/.test(hex) ? hex : fallback;
        }
        colorNavy.value = toColorInput(state.colors.navy, '#0C2340');
        colorGold.value = toColorInput(state.colors.gold, '#FFD84D');
        colorBlue.value = toColorInput(state.colors.blue, '#43C1F2');
        applyColors();
      }
      // URL
      if(state.navUrls){
        applyNavUrls(state.navUrls);
      }else{
        applyNavUrls({});
      }
    }

    function save(){
      const state = readState();
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
      alert('ä¿å­˜ã—ã¾ã—ãŸï¼ˆã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ï¼‰ã€‚');
    }
    function load(){
      const raw = localStorage.getItem(STORAGE_KEY);
      if(!raw){ alert('ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“'); return; }
      try{
        const state = JSON.parse(raw);
        applyState(state);
        alert('ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸã€‚');
      }catch(e){ alert('èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚'); }
    }
    function exportJSON(){
      const state = readState();
      const blob = new Blob([JSON.stringify(state, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'sports-festival-minimal-with-flash.json';
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    }
    function importJSON(file){
      const reader = new FileReader();
      reader.onload = e=>{
        try{
          const state = JSON.parse(e.target.result);
          applyState(state);
          alert('ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦åæ˜ ã—ã¾ã—ãŸã€‚å¿…è¦ãªã‚‰ä¿å­˜ã—ã¦ãã ã•ã„ã€‚');
        }catch(err){ alert('JSONã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚'); }
      };
      reader.readAsText(file);
    }

    btnSave.addEventListener('click', save);
    btnLoad.addEventListener('click', load);
    btnExport.addEventListener('click', exportJSON);
    btnImport.addEventListener('click', ()=> importFile.click());
    importFile.addEventListener('change', (e)=>{ if(e.target.files[0]) importJSON(e.target.files[0]); });

    // åˆå›ãƒ­ãƒ¼ãƒ‰æ™‚ã«æ—¢å­˜è¨­å®šãŒã‚ã‚Œã°é©ç”¨
    (function init(){
      const raw = localStorage.getItem(STORAGE_KEY);
      if(raw){
        try{ applyState(JSON.parse(raw)); }catch(e){}
      }else{
        // åˆå›ã¯ç©ºã®URLã‚’é©ç”¨ï¼ˆï¼ç„¡åŠ¹ãƒªãƒ³ã‚¯ï¼‰
        applyNavUrls({});
      }
      applyColors(); // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè‰²åæ˜ 
    })();
  </script>
</body>
</html>
